<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Quiz</title>

<style>
body {
    background: #0f0f0f;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    padding: 40px;
    color: #fff;
}

.chat {
    width: 100%;
    max-width: 600px;
    background: #181818;
    border-radius: 20px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    height: 80vh;
}

.messages {
    flex: 1;
    overflow-y: auto;
    margin-bottom: 20px;
}

.message {
    margin-bottom: 15px;
    max-width: 80%;
    padding: 12px 16px;
    border-radius: 16px;
    line-height: 1.4;
    animation: fadeIn 0.3s ease;
}

.bot {
    background: #2a2a2a;
    align-self: flex-start;
}

.user {
    background: #ffd400;
    color: #000;
    align-self: flex-end;
}

.options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
}

.option-btn {
    background: #2a2a2a;
    border: 1px solid #333;
    padding: 10px 14px;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
}

.option-btn:hover {
    background: #ffd400;
    color: #000;
}

.typing {
    font-style: italic;
    opacity: 0.6;
}

.input-area {
    display: flex;
    gap: 10px;
}

input {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    border: none;
    outline: none;
}

button {
    padding: 12px 18px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #ffd400;
    font-weight: bold;
}

@keyframes fadeIn {
    from {opacity: 0; transform: translateY(5px);}
    to {opacity: 1; transform: translateY(0);}
}
</style>
</head>

<body>

<div class="chat">
    <div class="messages" id="messages"></div>

    <div class="input-area" id="inputArea" style="display:none;">
        <input type="text" id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç...">
        <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
</div>

<script>
const messages = document.getElementById('messages');
const inputArea = document.getElementById('inputArea');
const input = document.getElementById('userInput');
const button = document.getElementById('sendBtn');

let selectedService = null;
let step = 0;

function addMessage(text, type) {
    const div = document.createElement('div');
    div.classList.add('message', type);
    div.innerHTML = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

function showTyping(callback) {
    const typing = document.createElement('div');
    typing.classList.add('message', 'bot', 'typing');
    typing.innerHTML = "–ü–µ—á–∞—Ç–∞–µ—Ç...";
    messages.appendChild(typing);
    messages.scrollTop = messages.scrollHeight;

    setTimeout(() => {
        typing.remove();
        callback();
    }, 1200);
}

function showFirstQuestion() {
    addMessage("–ü—Ä–∏–≤–µ—Ç üëã –ö–∞–∫–æ–π –ø—Ä–æ–µ–∫—Ç –≤–∞–º –Ω—É–∂–µ–Ω?", "bot");

    const optionsDiv = document.createElement('div');
    optionsDiv.classList.add('options');

    const services = ["–õ–µ–Ω–¥–∏–Ω–≥", "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω", "–ê–π–¥–µ–Ω—Ç–∏–∫–∞"];

    services.forEach(service => {
        const btn = document.createElement('div');
        btn.classList.add('option-btn');
        btn.innerText = service;

        btn.onclick = () => {
            selectedService = service;
            optionsDiv.remove();
            addMessage(service, "user");

            showTyping(() => {
                askNextQuestion();
            });
        };

        optionsDiv.appendChild(btn);
    });

    messages.appendChild(optionsDiv);
}

function askNextQuestion() {

    if (step === 0) {
        let questionText = "";

        if (selectedService === "–õ–µ–Ω–¥–∏–Ω–≥") {
            questionText = "–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä üî• –≠—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–¥–∞—é—â–∏–π –ª–µ–Ω–¥–∏–Ω–≥ –∏–ª–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π?";
        } else if (selectedService === "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω") {
            questionText = "–°–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–∞–∑–º–µ—â–∞—Ç—å?";
        } else {
            questionText = "–ê–π–¥–µ–Ω—Ç–∏–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –±—Ä–µ–Ω–¥–∞ –∏–ª–∏ —Ä–µ–±—Ä–µ–Ω–¥–∏–Ω–≥?";
        }

        addMessage(questionText, "bot");
        inputArea.style.display = "flex";
    }

    else if (step === 1) {
        addMessage("–ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –¥–µ–¥–ª–∞–π–Ω—ã –ø–æ –∑–∞–ø—É—Å–∫—É?", "bot");
    }

    else if (step === 2) {
        addMessage("–ö–∞–∫ —Å –≤–∞–º–∏ —É–¥–æ–±–Ω–µ–µ —Å–≤—è–∑–∞—Ç—å—Å—è?", "bot");
    }

    else {
        showTyping(() => {
            addMessage("–°–ø–∞—Å–∏–±–æ üöÄ –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!", "bot");
            input.disabled = true;
            button.disabled = true;
        });
        return;
    }

    step++;
}

function handleSend() {
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, "user");
    input.value = "";

    showTyping(() => {
        askNextQuestion();
    });
}

button.addEventListener("click", handleSend);
input.addEventListener("keypress", e => {
    if (e.key === "Enter") handleSend();
});

showFirstQuestion();
</script>

</body>
</html>
